# Rule template for object files.
#
# The reason why objects depend on their dependency data file
# is to trigger the generation of their dependency data when they are updated.
# Once generated, future executions of make will include and benefit from the dependency data.
# Dependency data file generation rules are defined in .make/targets/dependencies.
#
# $(1) = path to source file
# $(2) = path to object file
# $(3) = path to dependency data file
#
# References:
#
#     https://make.mad-scientist.net/papers/advanced-auto-dependency-generation/#depdelete
#
object_rule_template = $(call rule_template,$(2),$(call compiler.compile_object,$(2),$(1),$(3),$(linkage)),$(1),$(dir $(2) $(3)))

# Computes the parameters for and evaluates the object rule template.
#
# $(1) = path to source file
#
generate_object_rule = $(call object_rule_template,$(1),$(call to_object,$(1)),$(call to_dependency,$(1)))

