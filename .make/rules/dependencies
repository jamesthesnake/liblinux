# Rule template for dependency data files.
#
# $(1) = path to source file
# $(2) = path to dependency file
# $(3) = make function that converts a path to a source file
#        to a list of paths to all its targets
#
define dependency_file_rule_template

$(call rule_template,$(2),$$(call compiler.generate_dependency_data,$(2),$(1),$$(call $(3),$(1))),$(1),$(dir $(2)))

endef

# Computes the parameters for and evaluates the dependency file rule template.
#
# $(1) = path to source source file
# $(2) = make function that converts a path to a source file
#        to a list of paths to all its targets
#
generate_dependency_file_rule = $(call dependency_file_rule_template,$(1),$(call to_dependency,$(1)),$(2))
